function endRound() {
  drawTable(true);
  setTimeout(() => {
    const lowest = players.reduce((min, p) =>
      getCardValue(p.card) < getCardValue(min.card) ? p : min
    );
    lowest.chips--;

    if (lowest.chips <= 0) {
      players = players.filter(p => p.id !== lowest.id);
      drawTable(false); // immediately update visuals
    }

    if (players.length === 1) {
      alert(`Player ${players[0].id} wins!`);
      document.getElementById("actionBtns").style.display = "none";
      return;
    }

    deck = createDeck();
    players.forEach(p => p.card = deck.pop());
    dealerCard = deck.pop();

    dealerIndex = players.findIndex(p => p.id === players[dealerIndex]?.id) || 0;
    currentPlayer = (dealerIndex + 1) % players.length;

    drawTable(false);
    processTurn();
  }, 1500);
}
